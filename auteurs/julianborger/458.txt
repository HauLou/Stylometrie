The deal struck between the US and The ailing Dear Leader wanted the agreement because he had promised his malnourished country that 2012 would mark the dawn of a new era of prosperity. Given the parlous state of the country, it was an absurd promise but the regime's priority was to put at least some food in the markets, to ensure the irony is not overwhelmingly painful. 
The sealing of the deal, after just one meeting between US and North Korean officials last week in China, confirms that the regime is looking for continuity and stability while the heir, Kim Jong-un, takes over the reins. There had been concerns that Pyongyang might launch more military operations against South Korean, like the shelling of a South Korean island in late 2010, to burnish the dauphin's credentials as a martial figure. But clearly, the regime felt that his credentials as a provider for his 25 million people was more important.
This is what Stephen Bosworth, the US special envoy on North Korea until last year, told the Washington Post:
This is what we had been trying to do for the last year. It's a sign that the North Koreans want to have continuity. ... It's important to keep in mind that this is not one individual acting and that they've done this for their own reasons. First, they need the food aid, and I think they probably want a relatively quiet political environment to carry on the transition.

The However, there is no particular reason to believe there are any lessons here for Tehran. Iranian officials are generally horrified by any comparison with a basket case like Hermit Kingdom, although Tehran is not above buying North Korean missile technology. Iran pursuit of the full nuclear fuel cycle is rooted in its image of itself as a great world civilisation assuming its rightful role as a regional power. In 2008, Iran was offered a far more substantial packet of incentives to give up enrichment, and turned it down.
Furthermore, the Iranian regime is not monolithic. As Friday's Majlis elections will illustrate, there are different groups within the establishment struggling for dominance or survival. None of them will gain any advantage by appearing ready to sell Iranian nuclear ambitions for some American grain.
